#!/usr/bin/env python
# pylint: disable=invalid-name
"""Build client.pyi file."""

import argparse
import os
import sys

FILE_HEADER = '''\
# THIS FILE IS AUTO-GENERATED. DO NOT EDIT THIS FILE BY HAND.
from botocore.client import *
'''

CLIENT_IMPORT_TEMPLATE = '''\
from botocore._clients.{service_name} import *
'''


def list_all_directories(parent_dir):
    return [
        d for d in os.listdir(parent_dir)
        if os.path.isdir(os.path.join(parent_dir, d))
    ]


def main(args):
    parser = argparse.ArgumentParser()
    parser.add_argument('clients_dir')
    parser.add_argument('output_file')
    args = parser.parse_args(args)

    clients_packages = list_all_directories(args.clients_dir)

    with open(args.output_file, 'w') as output:
        output.write(FILE_HEADER)
        for package_name in clients_packages:
            output.write(
                CLIENT_IMPORT_TEMPLATE.format(service_name=package_name)
            )


if __name__ == '__main__':
    main(sys.argv[1:])
